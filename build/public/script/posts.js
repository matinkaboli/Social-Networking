"use strict";function makeLike(){var e=!0,t=!1,n=void 0;try{for(var r,a=allposts[Symbol.iterator]();!(e=(r=a.next()).done);e=!0)!function(e){var t=e.getElementsByTagName("input")[0];t.addEventListener("click",function(){var n=e.getElementsByTagName("p")[4].innerHTML,r=e.getElementsByTagName("span")[0],a={method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:username,_id:n})};"LIKE"===t.value?getLike("/like",a,t,r):"DISLIKE"===t.value&&getLike("/dislike",a,t,r)})}(r.value)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}function getLike(e,t,n,r){fetch(e,t).then(checkStatus).then(function(e){return e.json()}).then(function(t){"/like"===e?!1===t.ok||(n.value="DISLIKE",r.innerHTML=parseInt(r.innerHTML)+1):"/dislike"===e&&(!1===t.ok||(n.value="LIKE",r.innerHTML=parseInt(r.innerHTML)-1))}).catch(function(e){console.error(e)})}function getMorePost(e){fetch("/morepost",e).then(checkStatus).then(function(e){return e.json()}).then(function(e){morePost.setAttribute("enumerate",parseInt(morePost.getAttribute("enumerate"))+1),e.done&&(morePost.style.display="none");var t=e.list,n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value,d=document.getElementById("posts"),s=document.createElement("div");s.style.backgroundColor="red",s.setAttribute("class","onepost");var l=document.createElement("p"),u=document.createTextNode("Title: "+c.title);l.setAttribute("id","title"),l.appendChild(u),s.appendChild(l);var p=document.createElement("p");p.setAttribute("id","time");var m=document.createTextNode("Time: "+c.time);p.appendChild(m),s.appendChild(p);var h=document.createElement("p");h.setAttribute("id","content");var v=document.createTextNode("Content: "+c.content);h.appendChild(v),s.appendChild(h);var y=document.createElement("p"),f=document.createTextNode("Likes: "),k=document.createElement("spam"),E=document.createTextNode(c.likes.length);k.appendChild(E),y.appendChild(f),y.appendChild(k),s.appendChild(y);var T=document.createElement("p");T.style.display="none";var g=document.createTextNode(c._id);if(T.appendChild(g),s.appendChild(T),c.like){var C=document.createElement("input");C.setAttribute("type","submit"),C.setAttribute("value","DISLIKE"),s.appendChild(C)}else{var L=document.createElement("input");L.setAttribute("type","submit"),L.setAttribute("value","LIKE"),s.appendChild(L)}d.appendChild(s),makeLike()}}catch(e){r=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}}).catch(function(e){console.error(e)})}function checkStatus(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.res=e,t}var allposts=document.getElementsByClassName("onepost");makeLike();var morePost=document.getElementById("morepost");morePost.addEventListener("click",function(){var e=parseInt(morePost.getAttribute("enumerate"));getMorePost({method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({enumerate:e,username:username,watcher:watcher})})});